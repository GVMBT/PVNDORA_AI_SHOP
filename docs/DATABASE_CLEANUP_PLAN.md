# –ü–ª–∞–Ω –æ—á–∏—Å—Ç–∫–∏ –ë–î –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

## üìã –û–±–∑–æ—Ä

–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å—ã–≤–∞–µ—Ç –ø–ª–∞–Ω –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø–µ—Ä–µ–¥ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–æ–º. –¶–µ–ª—å: —É–¥–∞–ª–∏—Ç—å –≤—Å–µ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –∏ –∏—Å—Ç–æ—Ä–∏—é –∑–∞–∫–∞–∑–æ–≤, –æ—Å—Ç–∞–≤–∏–≤ —Ç–æ–ª—å–∫–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã–µ.

## ‚úÖ –ß—Ç–æ –û–°–¢–ê–í–õ–Ø–ï–ú

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
- ‚úÖ **users** - –í—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –æ—Å—Ç–∞—é—Ç—Å—è
  - –û–±–Ω—É–ª—è—é—Ç—Å—è: `balance`, `total_saved`, `total_referral_earnings`, `turnover_usd`, `referral_level`
  - –û—Å—Ç–∞—é—Ç—Å—è: `telegram_id`, `username`, `first_name`, `referrer_id`, `is_admin`, `language_code`, `preferred_currency`, `interface_language`, `photo_url`, `last_activity_at`, `created_at`

### –¢–æ–≤–∞—Ä—ã –∏ –°—Ç–æ–∫
- ‚úÖ **products** - –í—Å–µ —Ç–æ–≤–∞—Ä—ã –æ—Å—Ç–∞—é—Ç—Å—è (4 —Ç–æ–≤–∞—Ä–∞)
- ‚úÖ **stock_items** - –í–µ—Å—å —Å—Ç–æ–∫ –æ—Å—Ç–∞–µ—Ç—Å—è (396 –ø–æ–∑–∏—Ü–∏–π)
  - –í—Å–µ –ø–æ–∑–∏—Ü–∏–∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è –≤ —Å—Ç–∞—Ç—É—Å `available` (–∏–∑ `reserved`/`sold`)
- ‚úÖ **suppliers** - –ü–æ—Å—Ç–∞–≤—â–∏–∫–∏ –æ—Å—Ç–∞—é—Ç—Å—è
- ‚úÖ **insurance_options** - –û–ø—Ü–∏–∏ —Å—Ç—Ä–∞—Ö–æ–≤–∫–∏ –æ—Å—Ç–∞—é—Ç—Å—è

### –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏
- ‚úÖ **referral_settings** - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–π –ø—Ä–æ–≥—Ä–∞–º–º—ã (1 –∑–∞–ø–∏—Å—å)
- ‚úÖ **exchange_rates** - –ö—É—Ä—Å—ã –≤–∞–ª—é—Ç (12 –≤–∞–ª—é—Ç, –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
- ‚úÖ **accounting_settings** - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —É—á–µ—Ç–∞ (1 –∑–∞–ø–∏—Å—å)
- ‚úÖ **payment_gateway_fees** - –ö–æ–º–∏—Å—Å–∏–∏ –ø–ª–∞—Ç–µ–∂–Ω—ã—Ö —Å–∏—Å—Ç–µ–º (8 –∑–∞–ø–∏—Å–µ–π)
- ‚úÖ **promo_codes** - –ü—Ä–æ–º–æ–∫–æ–¥—ã –æ—Å—Ç–∞—é—Ç—Å—è, –Ω–æ –æ–±–Ω—É–ª—è–µ—Ç—Å—è `usage_count`
- ‚úÖ **faq** - –ß–∞—Å—Ç–æ –∑–∞–¥–∞–≤–∞–µ–º—ã–µ –≤–æ–ø—Ä–æ—Å—ã (20 –∑–∞–ø–∏—Å–µ–π)
- ‚úÖ **product_embeddings** - –í–µ–∫—Ç–æ—Ä–Ω—ã–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è –¥–ª—è –ø–æ–∏—Å–∫–∞ (0 –∑–∞–ø–∏—Å–µ–π)

## ‚ùå –ß—Ç–æ –£–î–ê–õ–Ø–ï–ú

### –§–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
- ‚ùå **orders** - –í—Å–µ –∑–∞–∫–∞–∑—ã (41 –∑–∞–ø–∏—Å—å)
- ‚ùå **order_items** - –í—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã –∑–∞–∫–∞–∑–æ–≤ (69 –∑–∞–ø–∏—Å–µ–π)
- ‚ùå **balance_transactions** - –í—Å–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –±–∞–ª–∞–Ω—Å–∞ (70 –∑–∞–ø–∏—Å–µ–π)
- ‚ùå **referral_bonuses** - –í—Å–µ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–µ –±–æ–Ω—É—Å—ã (0 –∑–∞–ø–∏—Å–µ–π)
- ‚ùå **withdrawal_requests** - –í—Å–µ –∑–∞–ø—Ä–æ—Å—ã –Ω–∞ –≤—ã–≤–æ–¥ (4 –∑–∞–ø–∏—Å–∏)
- ‚ùå **expenses** - –í—Å–µ —Ä–∞—Å—Ö–æ–¥—ã (0 –∑–∞–ø–∏—Å–µ–π)
- ‚ùå **order_expenses** - –í—Å–µ —Ä–∞—Å—á–µ—Ç—ã —Ä–∞—Å—Ö–æ–¥–æ–≤ –ø–æ –∑–∞–∫–∞–∑–∞–º (32 –∑–∞–ø–∏—Å–∏)
- ‚ùå **insurance_revenue** - –í—Å–µ –¥–æ—Ö–æ–¥—ã –æ—Ç —Å—Ç—Ä–∞—Ö–æ–≤–æ–∫ (0 –∑–∞–ø–∏—Å–µ–π)
- ‚ùå **insurance_replacements** - –í—Å–µ –∑–∞–º–µ–Ω—ã –ø–æ —Å—Ç—Ä–∞—Ö–æ–≤–∫–µ (0 –∑–∞–ø–∏—Å–µ–π)

### –ò—Å—Ç–æ—Ä–∏—è –∏ –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
- ‚ùå **tickets** - –í—Å–µ —Ç–∏–∫–µ—Ç—ã –ø–æ–¥–¥–µ—Ä–∂–∫–∏ (10 –∑–∞–ø–∏—Å–µ–π)
- ‚ùå **reviews** - –í—Å–µ –æ—Ç–∑—ã–≤—ã (21 –∑–∞–ø–∏—Å—å)
- ‚ùå **chat_history** - –í—Å—è –∏—Å—Ç–æ—Ä–∏—è —á–∞—Ç–∞ —Å AI (186 –∑–∞–ø–∏—Å–µ–π)
- ‚ùå **analytics_events** - –í—Å–µ —Å–æ–±—ã—Ç–∏—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ (99 –∑–∞–ø–∏—Å–µ–π)
- ‚ùå **wishlist** - –í—Å–µ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ (0 –∑–∞–ø–∏—Å–µ–π)
- ‚ùå **waitlist** - –í—Å–µ –ª–∏—Å—Ç—ã –æ–∂–∏–¥–∞–Ω–∏—è (0 –∑–∞–ø–∏—Å–µ–π)
- ‚ùå **broadcast_messages** - –ò—Å—Ç–æ—Ä–∏—è —Ä–∞—Å—Å—ã–ª–æ–∫ (1 –∑–∞–ø–∏—Å—å)
- ‚ùå **broadcast_recipients** - –ü–æ–ª—É—á–∞—Ç–µ–ª–∏ —Ä–∞—Å—Å—ã–ª–æ–∫ (24 –∑–∞–ø–∏—Å–∏)
- ‚ùå **partner_applications** - –ó–∞—è–≤–∫–∏ –Ω–∞ –ø–∞—Ä—Ç–Ω–µ—Ä—Å—Ç–≤–æ (1 –∑–∞–ø–∏—Å—å)
- ‚ùå **user_restrictions** - –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (0 –∑–∞–ø–∏—Å–µ–π)

## üîÑ –ß—Ç–æ –û–ë–ù–£–õ–Ø–ï–ú

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
- üîÑ `balance` ‚Üí 0
- üîÑ `total_saved` ‚Üí 0
- üîÑ `total_referral_earnings` ‚Üí 0
- üîÑ `total_purchases_amount` ‚Üí 0
- üîÑ `turnover_usd` ‚Üí 0
- üîÑ `referral_level` ‚Üí 1
- üîÑ `referral_program_unlocked` ‚Üí false
- üîÑ `referral_unlocked_at` ‚Üí NULL
- üîÑ `level1_unlocked_at` ‚Üí NULL
- üîÑ `level2_unlocked_at` ‚Üí NULL
- üîÑ `level3_unlocked_at` ‚Üí NULL
- üîÑ `referral_clicks_count` ‚Üí 0
- üîÑ `warnings_count` ‚Üí 0
- üîÑ `is_banned` ‚Üí false
- üîÑ `do_not_disturb` ‚Üí false

### –°—Ç–æ–∫
- üîÑ –í—Å–µ `stock_items` —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º `reserved` –∏–ª–∏ `sold` ‚Üí `available`
- üîÑ `reserved_at` ‚Üí NULL
- üîÑ `sold_at` ‚Üí NULL

### –ü—Ä–æ–º–æ–∫–æ–¥—ã
- üîÑ `usage_count` ‚Üí 0 (–¥–ª—è –≤—Å–µ—Ö –ø—Ä–æ–º–æ–∫–æ–¥–æ–≤)

## üìä –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ë–î

| –¢–∞–±–ª–∏—Ü–∞ | –ó–∞–ø–∏—Å–µ–π | –î–µ–π—Å—Ç–≤–∏–µ |
|---------|---------|----------|
| users | 31 | –û–±–Ω—É–ª–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É |
| products | 4 | –û—Å—Ç–∞–≤–∏—Ç—å |
| stock_items | 396 | –í–µ—Ä–Ω—É—Ç—å –≤ available |
| orders | 41 | –£–¥–∞–ª–∏—Ç—å |
| order_items | 69 | –£–¥–∞–ª–∏—Ç—å |
| balance_transactions | 70 | –£–¥–∞–ª–∏—Ç—å |
| referral_bonuses | 0 | –£–¥–∞–ª–∏—Ç—å |
| withdrawal_requests | 4 | –£–¥–∞–ª–∏—Ç—å |
| tickets | 10 | –£–¥–∞–ª–∏—Ç—å |
| reviews | 21 | –£–¥–∞–ª–∏—Ç—å |
| chat_history | 186 | –£–¥–∞–ª–∏—Ç—å |
| analytics_events | 99 | –£–¥–∞–ª–∏—Ç—å |
| expenses | 0 | –£–¥–∞–ª–∏—Ç—å |
| order_expenses | 32 | –£–¥–∞–ª–∏—Ç—å |

## üöÄ –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ

### –®–∞–≥ 1: –°–æ–∑–¥–∞–Ω–∏–µ –±—ç–∫–∞–ø–∞
**–ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û!** –°–æ–∑–¥–∞–π—Ç–µ –ø–æ–ª–Ω—ã–π –±—ç–∫–∞–ø –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ Supabase Dashboard –ø–µ—Ä–µ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º —Å–∫—Ä–∏–ø—Ç–∞.

### –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Ç–µ—Å—Ç–æ–≤–æ–π –∫–æ–ø–∏–∏
–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —Å–Ω–∞—á–∞–ª–∞ –≤—ã–ø–æ–ª–Ω–∏—Ç—å —Å–∫—Ä–∏–ø—Ç –Ω–∞ —Ç–µ—Å—Ç–æ–≤–æ–π –∫–æ–ø–∏–∏ –ë–î, —á—Ç–æ–±—ã —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ.

### –®–∞–≥ 3: –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–∞
–í—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç `scripts/prepare_test_database.sql` —á–µ—Ä–µ–∑:
- Supabase SQL Editor
- MCP Supabase tools (`mcp_supabase_apply_migration`)

### –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Å–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–≤–µ–¥–µ—Ç:
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π –≤ –∫–∞–∂–¥–æ–π —Ç–∞–±–ª–∏—Ü–µ
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å –Ω–µ–Ω—É–ª–µ–≤—ã–º–∏ –±–∞–ª–∞–Ω—Å–∞–º–∏ (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –ø—É—Å—Ç–æ)

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **–ë—ç–∫–∞–ø –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω** - –û–ø–µ—Ä–∞—Ü–∏—è –Ω–µ–æ–±—Ä–∞—Ç–∏–º–∞ –±–µ–∑ –±—ç–∫–∞–ø–∞
2. **–í–Ω–µ—à–Ω–∏–µ –∫–ª—é—á–∏** - –°–∫—Ä–∏–ø—Ç —É—á–∏—Ç—ã–≤–∞–µ—Ç –ø–æ—Ä—è–¥–æ–∫ —É–¥–∞–ª–µ–Ω–∏—è (—Å–Ω–∞—á–∞–ª–∞ –∑–∞–≤–∏—Å–∏–º—ã–µ —Ç–∞–±–ª–∏—Ü—ã)
3. **–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏—è** - –í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –≤ –æ–¥–Ω–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ (BEGIN/COMMIT)
4. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏** - –í—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –æ—Å—Ç–∞—é—Ç—Å—è, —Ç–æ–ª—å–∫–æ –æ–±–Ω—É–ª—è–µ—Ç—Å—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
5. **–°—Ç–æ–∫** - –í–µ—Å—å —Å—Ç–æ–∫ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ `available` –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
6. **–ù–∞—Å—Ç—Ä–æ–π–∫–∏** - –í—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (referral_settings, exchange_rates, etc.) –æ—Å—Ç–∞—é—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π

## üîç –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã

### –¢–∞–±–ª–∏—Ü—ã GT_* (–≥—Ä—É–∑–æ–ø–µ—Ä–µ–≤–æ–∑–∫–∏)
–ï—Å–ª–∏ —Ç–∞–±–ª–∏—Ü—ã `gt_*` –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤ PVNDORA, –∏—Ö –º–æ–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å –æ—Ç–¥–µ–ª—å–Ω–æ:
- `gt_chat_messages`
- `gt_chat_sessions`
- `gt_deal_history`
- `gt_payments`
- `gt_deals`
- `gt_clients`
- `gt_vehicles`
- `gt_lead_sources`
- `gt_managers`
- `gt_ai_knowledge_base`

–≠—Ç–∏ —Ç–∞–±–ª–∏—Ü—ã –Ω–µ –≤–∫–ª—é—á–µ–Ω—ã –≤ –æ—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç –æ—á–∏—Å—Ç–∫–∏, —Ç–∞–∫ –∫–∞–∫ –º–æ–≥—É—Ç –æ—Ç–Ω–æ—Å–∏—Ç—å—Å—è –∫ –¥—Ä—É–≥–æ–º—É –ø—Ä–æ–µ–∫—Ç—É.

## ‚úÖ –ü–æ—Å–ª–µ –æ—á–∏—Å—Ç–∫–∏

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Å–∫—Ä–∏–ø—Ç–∞:
- ‚úÖ –í—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –æ—Å—Ç–∞—é—Ç—Å—è —Å –æ–±–Ω—É–ª–µ–Ω–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π
- ‚úÖ –í—Å–µ —Ç–æ–≤–∞—Ä—ã –∏ —Å—Ç–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚úÖ –í—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã
- ‚úÖ –ù–µ—Ç —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∏ –∏—Å—Ç–æ—Ä–∏–∏ –∑–∞–∫–∞–∑–æ–≤
- ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é –Ω–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
