# –û—Ç—á—ë—Ç –æ –í—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–∏ –§—Ä–æ–Ω—Ç–µ–Ω–¥–∞ –∏ –ë–µ–∫–µ–Ω–¥–∞

**–î–∞—Ç–∞:** 2025-12-13  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ß–∞—Å—Ç–∏—á–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω–æ

## üéØ –ü—Ä–æ–±–ª–µ–º—ã

### 1. –ó–∞–∫–∞–∑ 5A7FEBF9 - –°—Ç–∞—Ç—É—Å –Ω–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è

**–°–∏–º–ø—Ç–æ–º—ã:**
- –ó–∞–∫–∞–∑ –æ–ø–ª–∞—á–µ–Ω —á–µ—Ä–µ–∑ CrystalPay (–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ —Å–∫—Ä–∏–Ω—à–æ—Ç–æ–º)
- –í –ë–î —Å—Ç–∞—Ç—É—Å `prepaid` (–æ–ø–ª–∞—Ç–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞)
- –ù–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è `PENDING` –∏ `PAYMENT_REQUIRED`
- `expires_at` –ø—Ä–æ—à–µ–ª (2025-12-13 08:12:47), –Ω–æ —Å—Ç–∞—Ç—É—Å –Ω–µ –æ–±–Ω–æ–≤–∏–ª—Å—è

**–ü—Ä–∏—á–∏–Ω–∞:**
- `expires_at` - —ç—Ç–æ —Å—Ä–æ–∫ –æ–ø–ª–∞—Ç—ã, –∞ –Ω–µ –¥–æ—Å—Ç–∞–≤–∫–∏
- –î–ª—è `prepaid` –∑–∞–∫–∞–∑–æ–≤ `expires_at` –Ω–µ –¥–æ–ª–∂–µ–Ω –≤–ª–∏—è—Ç—å –Ω–∞ —Å—Ç–∞—Ç—É—Å (–æ–ø–ª–∞—Ç–∞ —É–∂–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞)
- –§—Ä–æ–Ω—Ç–µ–Ω–¥ –º–æ–∂–µ—Ç –∫—ç—à–∏—Ä–æ–≤–∞—Ç—å —Å—Ç–∞—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–ª–∏ –Ω–µ –ø–æ–ª—É—á–∞—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

**–†–µ—à–µ–Ω–∏–µ:**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω `expires_at` –≤ `deadline` –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ
- ‚ö†Ô∏è –ù—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ
- ‚ö†Ô∏è –ù—É–∂–Ω–æ —É–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∞–∫—Ç—É–∞–ª—å–Ω—ã–π —Å—Ç–∞—Ç—É—Å

### 2. DEADLINE –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è

**–°–∏–º–ø—Ç–æ–º—ã:**
- –ù–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è `> DEADLINE:` –±–µ–∑ –∑–Ω–∞—á–µ–Ω–∏—è

**–ü—Ä–∏—á–∏–Ω–∞:**
- –ê–¥–∞–ø—Ç–µ—Ä –Ω–µ –ø–µ—Ä–µ–¥–∞–≤–∞–ª `expires_at` –∏–∑ –∑–∞–∫–∞–∑–∞ –≤ `deadline` –¥–ª—è items

**–†–µ—à–µ–Ω–∏–µ:**
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ: `adaptOrderItem` —Ç–µ–ø–µ—Ä—å –ø—Ä–∏–Ω–∏–º–∞–µ—Ç `orderExpiresAt` –∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç –µ–≥–æ –≤ `deadline`
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ: `adaptOrder` –ø–µ—Ä–µ–¥–∞–µ—Ç `expires_at` –≤ `adaptOrderItem`

### 3. –°—Ç–∞—Ç—É—Å –Ω–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏ –∏—Å—Ç–µ—á–µ–Ω–∏–∏ expires_at

**–°–∏–º–ø—Ç–æ–º—ã:**
- –ó–∞–∫–∞–∑—ã —Å –∏—Å—Ç–µ–∫—à–∏–º `expires_at` –æ—Å—Ç–∞—é—Ç—Å—è –≤ —Å—Ç–∞—Ç—É—Å–µ `pending`

**–ü—Ä–∏—á–∏–Ω–∞:**
- Cron job `expire_orders.py` –æ–±–Ω–æ–≤–ª—è–µ—Ç —Ç–æ–ª—å–∫–æ `pending` –∑–∞–∫–∞–∑—ã
- –î–ª—è `prepaid` –∑–∞–∫–∞–∑–æ–≤ `expires_at` –Ω–µ –¥–æ–ª–∂–µ–Ω –≤–ª–∏—è—Ç—å –Ω–∞ —Å—Ç–∞—Ç—É—Å (–æ–ø–ª–∞—Ç–∞ —É–∂–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞)

**–†–µ—à–µ–Ω–∏–µ:**
- ‚úÖ Cron job —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ - –æ–±–Ω–æ–≤–ª—è–µ—Ç —Ç–æ–ª—å–∫–æ `pending` –∑–∞–∫–∞–∑—ã
- ‚ö†Ô∏è –î–ª—è `prepaid` –∑–∞–∫–∞–∑–æ–≤ `expires_at` –Ω–µ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∞–∫—Ç—É–∞–ª–µ–Ω (—ç—Ç–æ —Å—Ä–æ–∫ –æ–ø–ª–∞—Ç—ã, –∞ –Ω–µ –¥–æ—Å—Ç–∞–≤–∫–∏)

### 4. –ê–¥–º–∏–Ω–∫–∞ –Ω–∞ –º–æ–∫–∞—Ö

**–°–∏–º–ø—Ç–æ–º—ã:**
- –ê–¥–º–∏–Ω–∫–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –º–æ–∫–∏ –≤–º–µ—Å—Ç–æ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

**–ü—Ä–∏—á–∏–Ω–∞:**
- –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã –µ—Å—Ç—å –≤ –±–µ–∫–µ–Ω–¥–µ, –Ω–æ —Ñ–æ—Ä–º–∞—Ç—ã –¥–∞–Ω–Ω—ã—Ö –º–æ–≥—É—Ç –Ω–µ —Å–æ–≤–ø–∞–¥–∞—Ç—å

**–†–µ—à–µ–Ω–∏–µ:**
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ: –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç –æ–∂–∏–¥–∞–Ω–∏—è–º –∞–¥–º–∏–Ω–∫–∏:
  - `GET /api/admin/products` ‚úÖ
  - `POST /api/admin/products` ‚úÖ
  - `PUT /api/admin/products/{id}` ‚úÖ
  - `GET /api/admin/stock` ‚úÖ
  - `POST /api/admin/stock` ‚úÖ
  - `POST /api/admin/stock/bulk` ‚úÖ
  - `GET /api/admin/orders` ‚úÖ
  - `GET /api/admin/tickets` ‚úÖ
  - `GET /api/admin/analytics` ‚úÖ
  - `GET /api/admin/users` ‚úÖ
  - `GET /api/admin/referral/*` ‚úÖ

## üîß –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –ò–∑–º–µ–Ω–µ–Ω–∏—è

### 1. –î–æ–±–∞–≤–ª–µ–Ω DEADLINE –≤ –∞–¥–∞–ø—Ç–µ—Ä

**–§–∞–π–ª:** `src/adapters/ordersAdapter.ts`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- ‚úÖ `adaptOrderItem` —Ç–µ–ø–µ—Ä—å –ø—Ä–∏–Ω–∏–º–∞–µ—Ç `orderExpiresAt` –∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç –µ–≥–æ –≤ `deadline`
- ‚úÖ `adaptOrder` –ø–µ—Ä–µ–¥–∞–µ—Ç `expires_at` –≤ `adaptOrderItem`
- ‚úÖ –§–æ—Ä–º–∞—Ç: `"2025-12-13 // 08:12:47"` (—Ä—É—Å—Å–∫–∞—è –ª–æ–∫–∞–ª—å)

### 2. –î–æ–±–∞–≤–ª–µ–Ω —Å—Ç–∞—Ç—É—Å `partial` –≤ —Ç–∏–ø—ã API

**–§–∞–π–ª:** `src/types/api.ts`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω —Å—Ç–∞—Ç—É—Å `partial` –≤ `OrderStatus` type

### 3. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω –º–∞–ø–ø–∏–Ω–≥ —Å—Ç–∞—Ç—É—Å–æ–≤

**–§–∞–π–ª:** `src/adapters/ordersAdapter.ts`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –æ –∑–Ω–∞—á–µ–Ω–∏–∏ —Å—Ç–∞—Ç—É—Å–æ–≤ –ø–æ—Å–ª–µ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞
- ‚úÖ `partial` –º–∞–ø–ø–∏—Ç—Å—è –≤ `paid` (–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ)

## üìä –¢–µ–∫—É—â–µ–µ –°–æ—Å—Ç–æ—è–Ω–∏–µ

### –ó–∞–∫–∞–∑ 5A7FEBF9

**–í –ë–î:**
- –°—Ç–∞—Ç—É—Å: `prepaid` ‚úÖ
- Payment ID: `715331868_zAIMlVJhWdPEbR` ‚úÖ
- Payment Gateway: `crystalpay` ‚úÖ
- `expires_at`: `2025-12-13 08:12:47` (–ø—Ä–æ—à–µ–ª)
- `updated_at`: `2025-12-13 17:50:56` (–ø–æ—Å–ª–µ webhook)

**–ù–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ:**
- –°—Ç–∞—Ç—É—Å: `PENDING` ‚ùå (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å `processing` –¥–ª—è `prepaid`)
- `PAYMENT_REQUIRED` ‚ùå (–Ω–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –¥–ª—è `prepaid`)
- `DEADLINE`: –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è ‚ùå (—Ç–µ–ø–µ—Ä—å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ)

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –§—Ä–æ–Ω—Ç–µ–Ω–¥ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç–∞—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–ª–∏ –Ω–µ –ø–æ–ª—É—á–∞–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- –ù—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ –®–∞–≥–∏

1. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ**
   - –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ `useOrdersTyped` –æ–±–Ω–æ–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∞–∫—Ç—É–∞–ª—å–Ω—ã–π —Å—Ç–∞—Ç—É—Å

2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –¥–ª—è prepaid –∑–∞–∫–∞–∑–æ–≤**
   - –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ `expires_at` –Ω–µ –≤–ª–∏—è–µ—Ç –Ω–∞ `prepaid` –∑–∞–∫–∞–∑—ã
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ cron job –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç `prepaid` –∑–∞–∫–∞–∑—ã

3. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ñ–æ—Ä–º–∞—Ç–æ–≤ –¥–∞–Ω–Ω—ã—Ö –∞–¥–º–∏–Ω–∫–∏**
   - –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ —Ñ–æ—Ä–º–∞—Ç—ã –¥–∞–Ω–Ω—ã—Ö —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç –æ–∂–∏–¥–∞–Ω–∏—è–º –∞–¥–º–∏–Ω–∫–∏
   - –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –∞–¥–º–∏–Ω–∫–∏

4. **–î–æ–±–∞–≤–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ**
   - Polling –¥–ª—è –∑–∞–∫–∞–∑–æ–≤ –≤ —Å—Ç–∞—Ç—É—Å–µ `processing`
   - WebSocket –¥–ª—è real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

## ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:
- ‚úÖ DEADLINE —Ç–µ–ø–µ—Ä—å –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ
- ‚úÖ –°—Ç–∞—Ç—É—Å `partial` –¥–æ–±–∞–≤–ª–µ–Ω –≤ —Ç–∏–ø—ã API
- ‚úÖ –ú–∞–ø–ø–∏–Ω–≥ —Å—Ç–∞—Ç—É—Å–æ–≤ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω —Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏

### –¢—Ä–µ–±—É–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏:
- ‚ö†Ô∏è –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ
- ‚ö†Ô∏è –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –¥–ª—è –∑–∞–∫–∞–∑–∞ 5A7FEBF9
- ‚ö†Ô∏è –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ñ–æ—Ä–º–∞—Ç–æ–≤ –¥–∞–Ω–Ω—ã—Ö –∞–¥–º–∏–Ω–∫–∏

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ß–∞—Å—Ç–∏—á–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω–æ, —Ç—Ä–µ–±—É–µ—Ç—Å—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
