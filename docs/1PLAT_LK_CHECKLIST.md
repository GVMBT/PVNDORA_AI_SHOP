# Чеклист проверки настроек в ЛК 1Plat

## Что видно на скриншотах

### ✅ Подтверждено:
- **Shop ID:** #1182 (соответствует `ONEPLAT_SHOP_ID`)
- **Секретный ключ:** Настроен (замаскирован в настройках)
- **Баланс:** 0 ₽ (может быть проблемой, но обычно не блокирует создание платежей)

### ⚠️ Что нужно проверить:

## 1. Вкладка "Настройки" магазина (PVNDORA → Настройки)

**Что проверить:**
1. ✅ **Методы оплаты включены:**
   - Должны быть включены: `card`, `sbp`, `qr`, `crypto`
   - Обычно это чекбоксы или переключатели для каждого метода
   - Если методы не включены - 1Plat не сможет генерировать реквизиты

2. ✅ **Host2Host режим:**
   - Должен быть включен для работы через API
   - Без него API может не работать или работать некорректно

3. ✅ **Лимиты и баланс:**
   - Проверить, нет ли ограничений на создание платежей
   - Баланс 0 ₽ обычно не блокирует, но лучше проверить

4. ✅ **Статус магазина:**
   - Магазин должен быть активен
   - Не должен быть заблокирован или на модерации

## 2. Главная вкладка "API" (верхнее меню)

**Что проверить:**
1. ✅ **API доступ:**
   - Должен быть включен доступ к API
   - Проверить, что используются правильные ключи (x-shop и x-secret)

2. ✅ **Методы API:**
   - Должны быть доступны методы: `/api/merchant/order/create/by-api`
   - Проверить, нет ли ограничений на использование API

## 3. Возможные проблемы

### Проблема 1: Методы оплаты не включены
**Симптом:** Ошибка "Не удалось получить реквизиты"
**Решение:** Включить нужные методы в настройках магазина

### Проблема 2: Host2Host не включен
**Симптом:** Платежи создаются в статусе черновика
**Решение:** Включить Host2Host режим в настройках

### Проблема 3: Баланс 0 ₽
**Симптом:** Может блокировать некоторые операции
**Решение:** Пополнить баланс (если требуется)

### Проблема 4: Лимиты превышены
**Симптом:** Ошибки при создании платежей
**Решение:** Проверить лимиты в настройках и увеличить при необходимости

## 4. Что сделать прямо сейчас

1. **Откройте вкладку "Настройки" магазина PVNDORA**
   - Проверьте, включены ли методы оплаты (card, sbp, qr, crypto)
   - Включите их, если выключены

2. **Проверьте Host2Host режим**
   - Должен быть включен для работы через API

3. **Проверьте главную вкладку "API"**
   - Убедитесь, что API доступен
   - Проверьте настройки API

4. **Попробуйте создать тестовый платеж**
   - После включения методов попробуйте снова

## 5. Если ничего не помогает

**Напишите в ТП 1Plat (кнопка "Поддержка" в правом верхнем углу):**

1. Shop ID: #1182
2. Проблема: "Не удалось получить реквизиты" при создании платежа через API
3. Запрос:
   ```json
   {
     "merchant_order_id": "test-order",
     "user_id": 339469894,
     "amount": 10000,
     "method": "card"
   }
   ```
4. Ответ: 500 Internal Server Error "Не удалось получить реквизиты"
5. Вопрос: Проверьте, включены ли методы оплаты для магазина и доступен ли Host2Host режим

## 6. Временное решение

Если методы 1Plat не работают:
- Используйте Freekassa как резервный платежный шлюз
- Настройте переменные окружения для Freekassa
- Укажите `payment_gateway: "freekassa"` при создании заказа
